<div class="cbn-icon-wrapper" *ngIf="!context.isClosed">
  <div class="cbn-icon" *ngIf="!context.cbnState">
    <svg height="20" viewBox="0 0 22 20" width="22" xmlns="http://www.w3.org/2000/svg"><path d="m20 0h-18c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h7v2h-2v2h8v-2h-2v-2h7c1.1 0 2-.9 2-2v-12c0-1.1-.9-2-2-2zm0 14h-18v-12h18zm-5-9c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2zm4 8h-8v-1c0-1.33 2.67-2 4-2s4 .67 4 2z" fill="#0351a1" fill-rule="evenodd" transform=""></path></svg>
  </div>
  <div class="cbn-icon" *ngIf="context.cbnState === 'dialing'">
    <div class="cbn-icon-layer pulse2 animated2 infinite"></div>
    <svg class="animated2 infinite shake2" height="19" viewBox="0 0 24 19" width="24" xmlns="http://www.w3.org/2000/svg"><path d="m23.71 14.67c-3.05-2.89-7.17-4.67-11.71-4.67s-8.66 1.78-11.71 4.67c-.18.18-.29.43-.29.71s.11.53.29.71l2.48 2.48c.18.18.43.29.71.29.27 0 .52-.11.7-.28.79-.74 1.69-1.36 2.66-1.85.33-.16.56-.5.56-.9v-3.1c1.45-.48 3-.73 4.6-.73s3.15.25 4.6.72v3.1c0 .39.23.74.56.9.98.49 1.87 1.12 2.66 1.85.18.18.43.28.7.28.28 0 .53-.11.71-.29l2.48-2.48c.18-.18.29-.43.29-.71 0-.27-.11-.52-.29-.7zm-3.96-11.82-3.56 3.55 1.41 1.41s3.45-3.52 3.56-3.55zm-6.75-2.85h-2v5h2zm-6.6 7.81 1.41-1.41-3.55-3.56-1.42 1.42c.11.03 3.56 3.55 3.56 3.55z" fill-rule="evenodd" transform=""/></svg>
  </div>
  <div class="cbn-icon" *ngIf="context.cbnState === 'busy'">
    <svg height="19" viewBox="0 0 24 19" width="24" xmlns="http://www.w3.org/2000/svg"><path d="m23.71 14.67c-3.05-2.89-7.17-4.67-11.71-4.67s-8.66 1.78-11.71 4.67c-.18.18-.29.43-.29.71s.11.53.29.71l2.48 2.48c.18.18.43.29.71.29.27 0 .52-.11.7-.28.79-.74 1.69-1.36 2.66-1.85.33-.16.56-.5.56-.9v-3.1c1.45-.48 3-.73 4.6-.73s3.15.25 4.6.72v3.1c0 .39.23.74.56.9.98.49 1.87 1.12 2.66 1.85.18.18.43.28.7.28.28 0 .53-.11.71-.29l2.48-2.48c.18-.18.29-.43.29-.71 0-.27-.11-.52-.29-.7zm-3.96-11.82-3.56 3.55 1.41 1.41s3.45-3.52 3.56-3.55zm-6.75-2.85h-2v5h2zm-6.6 7.81 1.41-1.41-3.55-3.56-1.42 1.42c.11.03 3.56 3.55 3.56 3.55z" fill-rule="evenodd" transform=""/></svg>
  </div>
  <div class="cbn-icon" *ngIf="context.cbnState === 'no-answer'">
    <svg height="19" viewBox="0 0 24 19" width="24" xmlns="http://www.w3.org/2000/svg"><path d="m23.71 14.67c-3.05-2.89-7.17-4.67-11.71-4.67s-8.66 1.78-11.71 4.67c-.18.18-.29.43-.29.71s.11.53.29.71l2.48 2.48c.18.18.43.29.71.29.27 0 .52-.11.7-.28.79-.74 1.69-1.36 2.66-1.85.33-.16.56-.5.56-.9v-3.1c1.45-.48 3-.73 4.6-.73s3.15.25 4.6.72v3.1c0 .39.23.74.56.9.98.49 1.87 1.12 2.66 1.85.18.18.43.28.7.28.28 0 .53-.11.71-.29l2.48-2.48c.18-.18.29-.43.29-.71 0-.27-.11-.52-.29-.7zm-3.96-11.82-3.56 3.55 1.41 1.41s3.45-3.52 3.56-3.55zm-6.75-2.85h-2v5h2zm-6.6 7.81 1.41-1.41-3.55-3.56-1.42 1.42c.11.03 3.56 3.55 3.56 3.55z" fill-rule="evenodd" transform=""/></svg>
  </div>
  <div class="cbn-icon" *ngIf="context.cbnState === 'failed'">
    <svg height="19" viewBox="0 0 24 19" width="24" xmlns="http://www.w3.org/2000/svg"><path d="m23.71 14.67c-3.05-2.89-7.17-4.67-11.71-4.67s-8.66 1.78-11.71 4.67c-.18.18-.29.43-.29.71s.11.53.29.71l2.48 2.48c.18.18.43.29.71.29.27 0 .52-.11.7-.28.79-.74 1.69-1.36 2.66-1.85.33-.16.56-.5.56-.9v-3.1c1.45-.48 3-.73 4.6-.73s3.15.25 4.6.72v3.1c0 .39.23.74.56.9.98.49 1.87 1.12 2.66 1.85.18.18.43.28.7.28.28 0 .53-.11.71-.29l2.48-2.48c.18-.18.29-.43.29-.71 0-.27-.11-.52-.29-.7zm-3.96-11.82-3.56 3.55 1.41 1.41s3.45-3.52 3.56-3.55zm-6.75-2.85h-2v5h2zm-6.6 7.81 1.41-1.41-3.55-3.56-1.42 1.42c.11.03 3.56 3.55 3.56 3.55z" fill-rule="evenodd" transform=""/></svg>
  </div>
  <div class="cbn-icon" *ngIf="context.cbnState === 'answer'">
    <svg height="19" viewBox="0 0 24 19" width="24" xmlns="http://www.w3.org/2000/svg"><path d="m23.71 14.67c-3.05-2.89-7.17-4.67-11.71-4.67s-8.66 1.78-11.71 4.67c-.18.18-.29.43-.29.71s.11.53.29.71l2.48 2.48c.18.18.43.29.71.29.27 0 .52-.11.7-.28.79-.74 1.69-1.36 2.66-1.85.33-.16.56-.5.56-.9v-3.1c1.45-.48 3-.73 4.6-.73s3.15.25 4.6.72v3.1c0 .39.23.74.56.9.98.49 1.87 1.12 2.66 1.85.18.18.43.28.7.28.28 0 .53-.11.71-.29l2.48-2.48c.18-.18.29-.43.29-.71 0-.27-.11-.52-.29-.7zm-3.96-11.82-3.56 3.55 1.41 1.41s3.45-3.52 3.56-3.55zm-6.75-2.85h-2v5h2zm-6.6 7.81 1.41-1.41-3.55-3.56-1.42 1.42c.11.03 3.56 3.55 3.56 3.55z" fill-rule="evenodd" transform=""/></svg>
  </div>
</div>

<div class="cbn-icon-wrapper" *ngIf="context.isClosed">
  <div class="cbn-icon closed">
    <svg height="8" viewBox="0 0 22 8" width="22" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd" transform="translate(-1 -8)"><path d="m0 0h24.000001v24.000001h-24.000001zm0 0h24.000001v24.000001h-24.000001z"></path><path d="m7.83689909 10.3913551v2.7170978c0 .3458124-.19583633.6360478-.48643218.7842532-.94127785.4631416-1.8257 1.0806639-2.61536263 1.8525666-.34745156.3396372-.91600865.3396372-1.26346021 0l-2.21105536-2.1613277c-.34745156-.3396373-.34745156-.8954073 0-1.2350445 5.93194567-5.79853359 15.54687789-5.79853359 21.47882349 0 .3474516.3396372.3474516.8954072 0 1.2350445l-2.204738 2.1551525c-.3474516.3396372-.9160087.3396372-1.2634602 0-.7833454-.7657275-1.6740848-1.389425-2.6153627-1.8525667-.2969131-.1420301-.4927494-.4446159-.4927494-.7780779v-2.7170978c-2.7038049-.85218066-5.6287153-.85835588-8.32620281 0z" fill-rule="nonzero"></path></g></svg>
  </div>
</div>
<div class="cbn-message-wrapper" *ngIf="context.isClosed">
  <div class="status-message"
       [innerHTML]=" 'STRINGS.CBN.LEFT' | translate:{ nickname: context.agent.nick } | vvcSanitize:'html' ">
  </div>
</div>

<div class="cbn-message-wrapper" *ngIf="!context.isClosed">
  <div class="status-message"
       [innerHTML]=" 'STRINGS.CBN.SUCCESS' | translate:{ nickname: context.agent.nick } | vvcSanitize:'html' "
       *ngIf="!context.cbnState">
    <!--
    You will be contacted shortly.<br>
    Please keep your phone next to you.<br><br>
    Don't close this window during the contact.
    <br><br>
    -->
  </div>
  <div class="status-message"
       [innerHTML]=" 'STRINGS.CBN.RING' | translate:{ nickname: context.agent.nick } | vvcSanitize:'html' "
       *ngIf="context.cbnState === 'dialing'">
    <!--
    Your phone is ringing...<br><br>
    Don't close this window during the contact.
    <br><br>
    -->
  </div>
  <div class="status-message"
       [innerHTML]=" 'STRINGS.CBN.BUSY' | translate:{ nickname: context.agent.nick } | vvcSanitize:'html' "
       *ngIf="context.cbnState === 'busy'">
  </div>
  <div class="status-message"
       [innerHTML]=" 'STRINGS.CBN.NOANSWER' | translate:{ nickname: context.agent.nick } | vvcSanitize:'html' "
       *ngIf="context.cbnState === 'no-answer'">
  </div>
  <div class="status-message"
       [innerHTML]=" 'STRINGS.CBN.WRONG_NUMBER' | translate:{ nickname: context.agent.nick } | vvcSanitize:'html' "
       *ngIf="context.cbnState === 'failed'">
  </div>
  <div class="status-message"
       [innerHTML]=" 'STRINGS.CBN.INLINE' | translate:{ nickname: context.agent.nick } | vvcSanitize:'html' "
       *ngIf="context.cbnState === 'answer'">
  </div>

  <div class="status-message" *ngIf="context.notRead > 0">
    <div class="media-bottom animated slideInLeft">
      <div class="chat-button"
           (click)="upgrade.emit()">
        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height="20" viewBox="0 0 20 20" width="34"><defs><path id="a" d="m20 2h-16c-1.1 0-1.99.9-1.99 2l-.01 18 4-4h14c1.1 0 2-.9 2-2v-12c0-1.1-.9-2-2-2zm-14 7h12v2h-12zm8 5h-8v-2h8zm4-6h-12v-2h12z"/><mask id="b" fill="#fff"><use fill="none" xlink:href="#a"/></mask></defs><g fill="none" fill-rule="evenodd" transform="translate(-2 -2)"><path d="m0 0h24v24h-24z"/><use fill="#FFF" fill-rule="nonzero" xlink:href="#a"/><g fill="#fff" fill-rule="evenodd" mask="url(#b)"><path d="m0 0h24v24h-24z"/></g></g>
          <circle *ngIf="context.notRead > 0" fill="#D7293B" cx="21" cy="5" r="5"></circle>
        </svg>
        <span>{{ 'STRINGS.VOICE.OPEN_CHAT' | translate }}</span>
      </div>
    </div>
  </div>
</div>
